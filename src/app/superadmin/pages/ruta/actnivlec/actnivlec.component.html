<div class="pt-4 divide-y divide-light-blue-400 ml-12 mr-4">
    <h1 class="text-xl font-bold mb-4">Bienvenido al panel de crear Actividad</h1>
    <!-- Nuevo componente de pasos -->
    <div class="w-full flex items-center justify-center px-4">
        <div class="flex-1 flex flex-col sm:flex-row justify-around text-center mx-2 sm:mx-4">
            <div *ngFor="let stepName of ['Actividad', 'Nivel', 'Lección', 'Contenido']; let i = index"
                class="stepper-item mb-2 sm:mb-0" [class.active]="i + 1 === step">
                <div class="step-counter flex items-center justify-center w-8 h-8 border rounded-full mx-auto text-base md:text-xl"
                    [ngClass]="{'text-yellow-500 border-blue-500': i + 1 === step, 'text-gray-400 border-gray-400': i + 1 !== step}">
                    {{ i + 1 }}
                </div>
                <h2 [ngClass]="{'text-yellow-500': i + 1 === step, 'text-gray-400': i + 1 !== step}"
                    class="text-base md:text-1xl whitespace-nowrap overflow-hidden font-bold mt-2 truncate">
                    {{ stepName }}
                </h2>
            </div>
        </div>
    </div>


    <div class="grid sm:grid-cols-1 md:grid-cols-1 xl:grid-cols-12 xl:gap-6 mb-2">
        <div class="col-span-8">
            <div>
                <div class="grid grid-cols-1">
                    <form [formGroup]="actividadForm" (ngSubmit)="addActividadSuperAdmin()" class="space-y-6 w-full">
                        <!-- Sección de la Actividad -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full sm:w-3/4 md:w-2/3 bg-gray-50 rounded-lg shadow-md p-4 md:p-8 md:my-6 mx-auto">
                          
                          <!-- Columna Izquierda -->
                          <div class="space-y-4">
                            <!-- Campo Nombre de la Actividad -->
                            <div class="text-xl font-normal">
                              <label for="nombre" class="text-xl font-normal">Nombre de la Actividad:</label>
                              <input type="text" id="nombre" formControlName="nombre"
                                class="mt-1 block w-full px-2 py-1 border rounded-lg bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-200 transition duration-200 ease-in hover:bg-blue-100 focus:bg-blue-100">
                              <div *ngIf="submittedActividad && actividadForm.controls.nombre.errors" class="max-w-[19rem] overflow-hidden mt-1">
                                <span *ngIf="actividadForm.controls.nombre.errors.required" class="text-red-700 pl-2 rounded-lg inline-block">
                                  Este campo es requerido *</span>
                              </div>
                            </div>
                      
                            <!-- Campo Tipo de Dato -->
                            <div class="text-xl font-normal">
                              <label for="id_tipo_dato" class="text-xl font-normal">Tipo de Dato:</label>
                              <select id="id_tipo_dato" formControlName="id_tipo_dato"
                                class="mt-1 block w-full px-2 py-1 border rounded-lg bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-200 transition duration-200 ease-in hover:bg-blue-100 focus:bg-blue-100">
                                <option value="" disabled selected>Seleccione el tipo de dato...</option>
                                <option *ngFor="let tipodato of listarTipoDato" [value]="tipodato.id">{{tipodato.nombre}}</option>
                              </select>
                              <div *ngIf="submittedActividad && actividadForm.controls.id_tipo_dato.errors" class="max-w-[19rem] overflow-hidden mt-1">
                                <span *ngIf="actividadForm.controls.id_tipo_dato.errors.required" class="text-red-700 pl-2 rounded-lg inline-block">
                                  Este campo es requerido *</span>
                              </div>
                            </div>
                      
                            <!-- Campo Aliado -->
                            <div class="text-xl font-normal">
                              <label for="id_aliado" class="text-xl font-normal">Aliado:</label>
                              <select id="id_aliado" formControlName="id_aliado" (change)="onAliadoChange($event)"
                                class="mt-1 block w-full px-2 py-1 border rounded-lg bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-200 transition duration-200 ease-in hover:bg-blue-100 focus:bg-blue-100">
                                <option value="" disabled selected>Seleccione el Aliado...</option>
                                <option *ngFor="let aliado of listarAliadoo" [value]="aliado.id">{{aliado.nombre}}</option>
                              </select>
                              <div *ngIf="submittedActividad && actividadForm.controls.id_aliado.errors" class="max-w-[19rem] overflow-hidden mt-1">
                                <span *ngIf="actividadForm.controls.id_aliado.errors.required" class="text-red-700 pl-2 rounded-lg inline-block">
                                  Este campo es requerido *</span>
                              </div>
                            </div>
                          </div>
                      
                          <!-- Columna Derecha -->
                          <div class="space-y-4">
                            <!-- Campo Descripción -->
                            <div class="text-xl font-normal">
                              <label for="descripcion" class="text-xl font-normal">Descripción de la Actividad:</label>
                              <input type="text" id="descripcion" formControlName="descripcion"
                                class="mt-1 block w-full px-2 py-1 border rounded-lg bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-200 transition duration-200 ease-in hover:bg-blue-100 focus:bg-blue-100">
                              <div *ngIf="submittedActividad && actividadForm.controls.descripcion.errors" class="max-w-[19rem] overflow-hidden mt-1">
                                <span *ngIf="actividadForm.controls.descripcion.errors.required" class="text-red-700 pl-2 rounded-lg inline-block">
                                  Este campo es requerido *</span>
                              </div>
                            </div>
                      
                            <!-- Campo Ruta Multi -->
                            <div class="text-xl font-normal">
                              <label for="ruta_multi" class="text-xl font-normal">Ruta Multi:</label>
                              <input type="text" id="ruta_multi" formControlName="ruta_multi"
                                class="mt-1 block w-full px-2 py-1 border rounded-lg bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-200 transition duration-200 ease-in hover:bg-blue-100 focus:bg-blue-100">
                              <div *ngIf="submittedActividad && actividadForm.controls.ruta_multi.errors" class="max-w-[19rem] overflow-hidden mt-1">
                                <span *ngIf="actividadForm.controls.ruta_multi.errors.required" class="text-red-700 pl-2 rounded-lg inline-block">
                                  Este campo es requerido *</span>
                              </div>
                            </div>
                      
                            <!-- Campo Asesor -->
                            <div class="text-xl font-normal">
                              <label for="id_asesor" class="text-xl font-normal">Asesor:</label>
                              <select id="id_asesor" formControlName="id_asesor"
                                class="mt-1 block w-full px-2 py-1 border rounded-lg bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-200 transition duration-200 ease-in hover:bg-blue-100 focus:bg-blue-100">
                                <option value="" disabled selected>Seleccione el Asesor...</option>
                                <option value="0">Ninguno</option>
                                <option *ngFor="let asesor of listarAsesores" [value]="asesor.id">{{ asesor.nombre }} {{ asesor.apellido }}</option>
                              </select>
                              <div *ngIf="submittedActividad && actividadForm.controls.id_asesor.errors" class="max-w-[19rem] overflow-hidden mt-1">
                                <span *ngIf="actividadForm.controls.id_asesor.errors.required" class="text-red-700 pl-2 rounded-lg inline-block">
                                  Este campo es requerido *</span>
                              </div>
                            </div>
                          </div>
                        </div>
                      
                        <!-- Botones -->
                        <div class="flex justify-center space-x-4 h-10 mt-4">
                          <button type="submit" class="inline-block py-0 px-16 bg-[#FA7D00] text-xl text-white font-bold rounded-full transition duration-300">
                            Añadir Nivel
                          </button>
                          <button type="button" (click)="cancelarcrearActividad()"
                            class="inline-block py-0 px-16 bg-[#373435] text-xl text-white font-bold rounded-full hover:bg-gray-400 transition duration-300 h-10">
                            Cancelar y Regresar
                          </button>
                        </div>
                      </form>
                      

                      <div *ngIf="mostrarNivelForm">
                        <h2 class="text-center my-8">Agregar Nivel</h2>
                        <form [formGroup]="nivelForm" (ngSubmit)="addNivelSuperAdmin()" class="space-y-6 w-full">
                          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full sm:w-3/4 md:w-2/3 bg-gray-50 rounded-lg shadow-md p-4 md:p-8 md:my-6 mx-auto">
                            
                            <!-- Columna Izquierda -->
                            <div class="space-y-4">
                              <!-- Campo Nombre del Nivel -->
                              <div class="text-xl font-normal">
                                <label for="nivel_nombre" class="text-xl font-normal">Nombre del Nivel:</label>
                                <input type="text" id="nivel_nombre" formControlName="nombre"
                                       class="p-2 w-full h-14 mb-2 border-blue-300 rounded-lg bg-gray-200 appearance-none focus:outline-none focus:ring-2 focus:ring-blue-200 transition duration-200 ease-in hover:bg-blue-100 focus:bg-blue-100">
                                <div *ngIf="submittedNivel && nivelForm.controls.nombre.errors"
                                     class="max-w-[19rem] overflow-hidden mt-1">
                                  <span *ngIf="nivelForm.controls.nombre.errors.required"
                                        class="text-red-700 pl-2 rounded-lg inline-block">Este campo es requerido *</span>
                                </div>
                              </div>
                            </div>
                      
                            <!-- Columna Derecha -->
                            <div class="space-y-4">
                              <!-- Campo Descripción del Nivel -->
                              <div class="text-xl font-normal">
                                <label for="nivel_descripcion" class="text-xl font-normal">Descripción del Nivel:</label>
                                <input type="text" id="nivel_descripcion" formControlName="descripcion"
                                       class="p-2 w-full h-14 mb-2 border-blue-300 rounded-lg bg-gray-200 appearance-none focus:outline-none focus:ring-2 focus:ring-blue-200 transition duration-200 ease-in hover:bg-blue-100 focus:bg-blue-100">
                                <div *ngIf="submittedNivel && nivelForm.controls.descripcion.errors"
                                     class="max-w-[19rem] overflow-hidden mt-1">
                                  <span *ngIf="nivelForm.controls.descripcion.errors.required"
                                        class="text-red-700 pl-2 rounded-lg inline-block">Este campo es requerido *</span>
                                </div>
                              </div>
                            </div>
                      
                          </div>
                      
                          <input type="hidden" id="id_actividad" formControlName="id_actividad">
                      
                          <div class="flex justify-center space-x-4 h-10 mt-4">
                            <button type="submit" class="inline-block py-0 px-16 bg-[#FA7D00] text-xl text-white font-bold rounded-full transition duration-300">
                              Guardar Nivel
                            </button>
                            <button type="button" (click)="cancelarGlobal()"
                                    class="inline-block py-0 px-16 bg-[#373435] text-xl text-white font-bold rounded-full hover:bg-gray-400 transition duration-300 h-10">
                              Cancelar
                            </button>
                          </div>
                        </form>
                      </div>
                      
                      <div *ngIf="mostrarLeccionForm"> <!--agregar Lección-->
                        <h2 class="text-center my-8">Agregar Lección</h2>
                        <form [formGroup]="leccionForm" (ngSubmit)="addLeccionSuperAdmin()" class="space-y-6 w-full">
                          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full sm:w-3/4 md:w-2/3 bg-gray-50 rounded-lg shadow-md p-4 md:p-8 md:my-6 mx-auto">
                            
                            <!-- Columna Izquierda -->
                            <div class="space-y-4">
                              <!-- Campo Nombre de la Lección -->
                              <div class="text-xl font-normal">
                                <label for="leccion_nombre" class="text-xl font-normal">Nombre de la Lección:</label>
                                <input type="text" id="leccion_nombre" formControlName="nombre"
                                       class="p-2 w-full h-14 mb-2 border-blue-300 rounded-lg bg-gray-200 appearance-none focus:outline-none focus:ring-2 focus:ring-blue-200 transition duration-200 ease-in hover:bg-blue-100 focus:bg-blue-100">
                                <div *ngIf="submittedLeccion && leccionForm.controls.nombre.errors"
                                     class="max-w-[19rem] overflow-hidden mt-1">
                                  <span *ngIf="leccionForm.controls.nombre.errors.required"
                                        class="text-red-700 pl-2 rounded-lg inline-block">Este campo es requerido *</span>
                                </div>
                              </div>
                            </div>
                      
                            <!-- Columna Derecha -->
                            <div class="space-y-4">
                              <!-- Campo ID del Nivel (oculto) -->
                              <input type="hidden" id="id_nivel" formControlName="id_nivel">
                            </div>
                      
                          </div>
                      
                          <div class="flex justify-center space-x-4 h-10 mt-4">
                            <button type="submit" class="inline-block py-0 px-16 bg-[#FA7D00] text-xl text-white font-bold rounded-full transition duration-300">
                              Guardar Lección
                            </button>
                            <button type="button" (click)="cancelarGlobal()"
                                    class="inline-block py-0 px-16 bg-[#373435] text-xl text-white font-bold rounded-full hover:bg-gray-400 transition duration-300 h-10">
                              Cancelar
                            </button>
                          </div>
                        </form>
                      </div>
                      

                      <div *ngIf="mostrarContenidoLeccionForm"> <!-- Agregar contenido por lección -->
                        <h2 class="text-center my-8 text-2xl font-semibold">Agregar Contenido a la Lección</h2>
                        <form [formGroup]="contenidoLeccionForm" (ngSubmit)="addContenidoLeccionSuperAdmin()" class="space-y-6 w-full">
                          <div class="grid grid-cols-1 md:grid-cols-2 gap-4 w-full sm:w-3/4 md:w-2/3 bg-gray-50 rounded-lg shadow-md p-4 md:p-8 md:my-6 mx-auto">
                            <!-- Columna Izquierda -->
                            <div class="space-y-4">
                              <!-- Campo Título -->
                              <div class="text-xl font-normal">
                                <label for="titulo" class="text-xl font-normal">Título:</label>
                                <input type="text" id="titulo" formControlName="titulo"
                                  class="mt-1 block w-full px-2 py-1 border rounded-lg bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-200 transition duration-200 ease-in hover:bg-blue-100 focus:bg-blue-100">
                                <div *ngIf="submittedContent && contenidoLeccionForm.controls.titulo.errors" class="max-w-[19rem] overflow-hidden mt-1">
                                  <span *ngIf="contenidoLeccionForm.controls.titulo.errors.required" class="text-red-700 pl-2 rounded-lg inline-block">
                                    Este campo es requerido *</span>
                                </div>
                              </div>
                              
                              <!-- Campo Descripción -->
                              <div class="text-xl font-normal">
                                <label for="descripcion" class="text-xl font-normal">Descripción:</label>
                                <input type="text" id="descripcion" formControlName="descripcion"
                                  class="mt-1 block w-full px-2 py-1 border rounded-lg bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-200 transition duration-200 ease-in hover:bg-blue-100 focus:bg-blue-100">
                                <div *ngIf="submittedContent && contenidoLeccionForm.controls.descripcion.errors" class="max-w-[19rem] overflow-hidden mt-1">
                                  <span *ngIf="contenidoLeccionForm.controls.descripcion.errors.required" class="text-red-700 pl-2 rounded-lg inline-block">
                                    Este campo es requerido *</span>
                                </div>
                              </div>
                            </div>
                            
                            <!-- Columna Derecha -->
                            <div class="space-y-4">
                              <!-- Campo Tipo de Dato -->
                              <div class="text-xl font-normal">
                                <label for="id_tipo_dato" class="text-xl font-normal">Tipo de Dato:</label>
                                <select id="id_tipo_dato" formControlName="id_tipo_dato"
                                  class="mt-1 block w-full px-2 py-1 border rounded-lg bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-200 transition duration-200 ease-in hover:bg-blue-100 focus:bg-blue-100">
                                  <option value="" disabled selected>Seleccione el tipo de dato...</option>
                                  <option *ngFor="let tipodato of listarTipoDato" [value]="tipodato.id">{{tipodato.nombre}}</option>
                                </select>
                                <div *ngIf="submittedContent && contenidoLeccionForm.controls.id_tipo_dato.errors" class="max-w-[19rem] overflow-hidden mt-1">
                                  <span *ngIf="contenidoLeccionForm.controls.id_tipo_dato.errors.required" class="text-red-700 pl-2 rounded-lg inline-block">
                                    Este campo es requerido *</span>
                                </div>
                              </div>
                              
                              <!-- Campo Fuente (dependiendo del tipo de dato) -->
                              <div>
                                <ng-container [ngSwitch]="contenidoLeccionForm.get('id_tipo_dato').value">
                                  <div *ngSwitchCase="'1'">
                                    <input type="text" id="fuente" formControlName="fuente"
                                      placeholder="Example http://example.com"
                                      class="mt-1 block w-full px-2 py-1 border rounded-lg bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-200 transition duration-200 ease-in hover:bg-blue-100 focus:bg-blue-100">
                                    <div *ngIf="submittedContent && contenidoLeccionForm.controls.fuente.errors" class="max-w-[19rem] overflow-hidden mt-1">
                                      <span *ngIf="contenidoLeccionForm.controls.fuente.errors.required" class="text-red-700 pl-2 rounded-lg inline-block">
                                        Este campo es requerido *</span>
                                    </div>
                                  </div>
                                  
                                  <div *ngSwitchCase="'2'">
                                    <input type="text" id="fuente" formControlName="Multimedia"
                                      class="mt-1 block w-full px-2 py-1 border rounded-lg bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-200 transition duration-200 ease-in hover:bg-blue-100 focus:bg-blue-100">
                                    <div *ngIf="submittedContent && contenidoLeccionForm.controls.Multimedia.errors" class="max-w-[19rem] overflow-hidden mt-1">
                                      <span *ngIf="contenidoLeccionForm.controls.Multimedia.errors.required" class="text-red-700 pl-2 rounded-lg inline-block">
                                        Este campo es requerido *</span>
                                    </div>
                                  </div>
                      
                                  <div *ngSwitchCase="'3'">
                                    <input type="file" id="fuente" formControlName="Imagen"
                                      (change)="onFileSelected($event)"
                                      class="mt-1 block w-full px-2 py-1 border rounded-lg bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-200 transition duration-200 ease-in hover:bg-blue-100 focus:bg-blue-100">
                                    <div *ngIf="submittedContent && contenidoLeccionForm.controls.Imagen.errors" class="max-w-[19rem] overflow-hidden mt-1">
                                      <span *ngIf="contenidoLeccionForm.controls.Imagen.errors.required" class="text-red-700 pl-2 rounded-lg inline-block">
                                        Este campo es requerido *</span>
                                    </div>
                                  </div>
                      
                                  <div *ngSwitchCase="'4'">
                                    <input type="text" id="fuente" formControlName="Pdf"
                                      class="mt-1 block w-full px-2 py-1 border rounded-lg bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-200 transition duration-200 ease-in hover:bg-blue-100 focus:bg-blue-100">
                                    <div *ngIf="submittedContent && contenidoLeccionForm.controls.Pdf.errors" class="max-w-[19rem] overflow-hidden mt-1">
                                      <span *ngIf="contenidoLeccionForm.controls.Pdf.errors.required" class="text-red-700 pl-2 rounded-lg inline-block">
                                        Este campo es requerido *</span>
                                    </div>
                                  </div>
                      
                                  <div *ngSwitchCase="'5'">
                                    <input type="text" id="fuente" formControlName="fuente"
                                      class="mt-1 block w-full px-2 py-1 border rounded-lg bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-200 transition duration-200 ease-in hover:bg-blue-100 focus:bg-blue-100">
                                    <div *ngIf="submittedContent && contenidoLeccionForm.controls.fuente.errors" class="max-w-[19rem] overflow-hidden mt-1">
                                      <span *ngIf="contenidoLeccionForm.controls.fuente.errors.required" class="text-red-700 pl-2 rounded-lg inline-block">
                                        Este campo es requerido *</span>
                                    </div>
                                  </div>
                                </ng-container>
                              </div>
                            </div>
                          </div>
                          
                          <!-- Botones -->
                          <div class="flex justify-center space-x-4 h-10 mt-4">
                            <button type="submit" class="inline-block py-0 px-16 bg-[#FA7D00] text-xl text-white font-bold rounded-full transition duration-300">
                              Guardar Lección
                            </button>
                            <button type="button" (click)="cancelarGlobal()"
                              class="inline-block py-0 px-16 bg-[#373435] text-xl text-white font-bold rounded-full hover:bg-gray-400 transition duration-300 h-10">
                              Cancelar
                            </button>
                          </div>
                        </form>
                      </div>
                      
                </div>
            </div>
        </div>
    </div>
</div>