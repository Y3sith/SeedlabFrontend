<div class="container mx-auto p-0 pt-2 ">
    <header class="flex flex-col md:flex-row justify-between items-center  md:pl-4 mt-2">
        <app-header [title] [subtitle]="'Agregar Actividades'"></app-header>
    </header>
    <div class="flex items-center justify-center font-poppins">
        <div class="w-full">
            <div class="max-w-full md:max-w-7xl mx-auto bg-gray-50 rounded-xl p-4 sm:p-8 md:p-16">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <!-- Actividad -->
                    <div class="bg-[#e6e6e6] p-4 rounded-lg shadow">
                        <h2 class="text-xl text-center font-semibold  text-[#FFB000] mb-4 italic font-poppins">Actividad
                        </h2>
                        <form [formGroup]="actividadForm">
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-1">Nombre de la
                                    actividad</label>
                                <input type="text" class="w-full p-2 border rounded" formControlName="nombre">
                            </div>
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-1">Descripci√≥n de la
                                    actividad</label>
                                <textarea class="w-full p-2 border rounded" rows="3"
                                    formControlName="descripcion"></textarea>
                            </div>

                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-1">Tipo de dato</label>
                                <select class="w-full p-2 border rounded" formControlName="id_tipo_dato"
                                    (change)="onTipoDatoChange()">
                                    <option *ngFor="let tipodato of listarTipoDato" [value]="tipodato.id">
                                        {{tipodato.nombre}}</option>
                                </select>
                            </div>
                            <!--  -->
                            <div class="mb-4">
                                <ng-container [ngSwitch]="actividadForm.get('id_tipo_dato').value">
                                    <!--video-->
                                    <div class="mb-4" *ngSwitchCase="'1'">
                                        <label class="block text-sm font-medium text-gray-700 mb-1" for="nombre">Link
                                            del video</label>
                                        <input type="text" id="fuente" formControlName="fuente"
                                            placeholder="Example http://example.com" (input)="onTextInput($event)"
                                            class="w-full p-2 border rounded ">
                                        <div *ngIf="formSubmitted && actividadForm.get('fuente')?.invalid"
                                            class="error text-red-700">
                                            Este campo es obligatorio.
                                        </div>
                                    </div>
                                    <!--imagen-->
                                    <div class="mb-4" *ngSwitchCase="'2'">
                                        <label
                                            class="text-sm font-normal relative cursor-pointer flex flex-row items-center  flex-none justify-center"
                                            for="nombre">
                                            <input type="file" id="fuente" class="hidden" accept="image/*" #fileInput
                                                (change)="onFileSelecteds($event, 'fuente')">
                                            <span (click)="triggerFileInput()"
                                                class="text-black px-4 py-2 border-2 border-blue-300 rounded-lg inline-flex items-center bg-white justify-center hover:bg-blue-100 ml-3">
                                                Subir Imagen
                                                <fa-icon [icon]="faImages" class="text-md ml-2"></fa-icon>
                                            </span>
                                        </label>
                                        <div *ngIf="formSubmitted && actividadForm.get('fuente')?.invalid"
                                            class="error text-red-700">
                                            Este campo es obligatorio.
                                        </div>
                                        <div *ngIf="actividadForm.get('fuente')?.value"
                                            class="mt-2 text-gray-500 text-center">
                                            Archivo seleccionado: {{ selectedfuente.name }}
                                        </div>
                                    </div>
                                    <!--pdf-->
                                    <div class="mb-4" *ngSwitchCase="'3'">
                                        <label
                                            class="text-sm font-normal relative cursor-pointer flex flex-row items-center flex-none justify-center"
                                            for="nombre">
                                            <input type="file" id="fuente" class="hidden" accept="application/pdf"
                                                #fileInput (change)="onFileSelecteds($event, 'fuente_documento')">
                                            <span (click)="triggerFileInput()"
                                                class="text-black px-4 py-2 border-2 border-blue-300 rounded-lg inline-flex items-center bg-white justify-center hover:bg-blue-100 ml-3">
                                                Subir PDF
                                                <fa-icon [icon]="faImages" class="text-md ml-2"></fa-icon>
                                            </span>
                                        </label>
                                        <div *ngIf="formSubmitted && actividadForm.get('fuente')?.invalid"
                                            class="error text-red-700">
                                            Este campo es obligatorio.
                                        </div>
                                        <div *ngIf="actividadForm.get('fuente')?.value"
                                            class="mt-2 text-gray-500 text-center">
                                            Archivo seleccionado: {{ actividadForm.get('fuente')?.value?.name }}
                                        </div>
                                    </div>
                                    <!--texto-->
                                    <div class="mb-4" *ngSwitchCase="'4'">
                                        <label class="text-xl font-normal flex-none justify-center"
                                            for="nombre"></label>
                                        <input type="text" id="fuente" formControlName="fuente"
                                            (input)="onTextInput($event)" placeholder="Texto de la actividad"
                                            class="w-full p-2 border rounded">
                                        <!-- <textarea type="text" id="fuente" formControlName="fuente" (input)="onTextInput($event)" placeholder="Texto de la actividad"
                                        class="w-full p-2 border rounded "></textarea> -->
                                        <div *ngIf="formSubmitted && actividadForm.get('fuente')?.invalid"
                                            class="error text-red-700">
                                            Este campo es obligatorio.
                                        </div>
                                    </div>
                                </ng-container>
                            </div>
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-1">Aliado</label>
                                <select formControlName="id_aliado" (change)="onAliadoChange($event)"
                                    class="w-full p-2 border rounded">
                                    <option value="" disabled selected>Seleccione el Aliado...</option>
                                    <option *ngFor="let aliado of listarAliadoo" [value]="aliado.id">
                                        {{aliado.nombre}}
                                    </option>
                                </select>
                            </div>
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-1">Asesor</label>
                                <select formControlName="id_asesor" class="w-full p-2 border rounded">
                                    <option *ngFor="let asesor of listarAsesores" [value]="asesor.id">
                                        {{ asesor.nombre }} {{ asesor.apellido }}
                                    </option>
                                </select>
                            </div>
                            <div class="flex justify-center h-10 mt-4">
                                <!--toca cambiarlo-->
                                <button type="button" (click)="addActividadSuperAdmin()" 
                                    class="inline-block py-0 px-16 bg-[#FA7D00] text-xl text-white font-bold rounded-full transition duration-300">guardar
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Nivel -->
                    <div class="bg-[#e6e6e6] p-4 rounded-lg shadow">
                        <h2 class="text-xl text-center font-semibold text-[#FFB000] mb-4 italic font-poppins">Nivel</h2>
                        <form [formGroup]="nivelForm">
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-1">Nombre del nivel</label>
                                <input type="text" class="w-full p-2 border rounded" formControlName="nombre">
                            </div>
                            <input type="hidden" id="id_actividad" formControlName="id_actividad">
                            <!-- Bot√≥n para agregar -->
                            <div class="flex justify-end items-center mb-4">
                                <span class="mr-3 text-[#FFB000] text-[18px] italic mb-1"
                                    style="font-weight: 600;">Agregar nivel</span>
                                <a (click)="agregarOtroNivel()" [routerLink]="'#'"
                                    class="bg-[#FFB000] text-white w-16 h-8 rounded-lg flex items-center justify-center no-underline">
                                    <span class="text-3xl font-semibold leading-none ">+</span>
                                </a>
                            </div>
                        </form>

                        <form [formGroup]="leccionForm">
                            <h2 class="text-xl text-center font-semibold text-[#FFB000] mb-4 italic font-poppins">Agregar lecci√≥n</h2>
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-1">Selecciona el nivel para crear la lecci√≥n</label>
                                <select formControlName="id_nivel" class="w-full p-2 border rounded" (change)="onNivelChange($event.target.value)">
                                    <option *ngFor="let vernivel of listarNiveles" [value]="vernivel.id">
                                        {{vernivel.nombre}}</option>
                                </select>
                            </div>
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-1">Nombre de la lecci√≥n</label>
                                <input formControlName="nombre" type="text" class="w-full p-2 border rounded">
                            </div>
                            <input type="hidden" id="id_nivel" formControlName="id_nivel">
                            <!-- Bot√≥n para agregar -->
                            <div class="flex justify-end items-center mb-4">
                                <span class="mr-3 text-[#FFB000] text-[18px] italic mb-1"
                                    style="font-weight: 600;">Agregar Lecci√≥n</span>
                                <a (click)="agregarOtraLeccion()" [routerLink]="'#'"
                                    class="bg-[#FFB000] text-white w-16 h-8 rounded-lg flex items-center justify-center no-underline">
                                    <span class="text-3xl font-semibold leading-none ">+</span>
                                </a>
                            </div>
                        </form>
                    </div>

                    <!-- Contenido -->
                    <div class="bg-[#e6e6e6] p-4 rounded-lg shadow">
                        <h2 class="text-xl text-center font-semibold text-[#FFB000] mb-4 italic font-poppins">Contenido</h2>
                        <form [formGroup]="contenidoLeccionForm">
                            <h3 class="text-lg text-center font-semibold mb-2 font-poppins">Agregar contenido a la
                                lecci√≥n
                            </h3>
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-1">Selecciona la lecci√≥n para agregar Contenido</label>
                                <select formControlName="id_leccion" class="w-full p-2 border rounded">
                                    <option *ngFor="let verleccion of listarLeccion" [value]="verleccion.id">
                                        {{verleccion.nombre}}</option>
                                </select>
                            </div>
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-1">T√≠tulo</label>
                                <input formControlName="titulo" type="text" class="w-full p-2 border rounded">
                            </div>
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-1">Descripci√≥n</label>
                                <textarea class="w-full p-2 border rounded" rows="3"
                                    formControlName="descripcion"></textarea>
                            </div>

                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700 mb-1">Tipo de dato</label>
                                <select class="w-full p-2 border rounded" formControlName="id_tipo_dato"
                                    (change)="onTipoDatoChangeContenido()">
                                    <option *ngFor="let tipoDatoContenido of listarTipoDatoContenido" [value]="tipoDatoContenido.id">
                                        {{tipoDatoContenido.nombre}}</option>
                                </select>
                            </div>
                            <!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
                            <div class="mb-4">
                                <ng-container [ngSwitch]="contenidoLeccionForm.get('id_tipo_dato').value">
                                    <!--video-->
                                    <div class="mb-4" *ngSwitchCase="'1'">
                                        <label class="block text-sm font-medium text-gray-700 mb-1" for="nombre">Link
                                            del video</label>
                                        <input type="text" id="fuente_contenido" formControlName="fuente_contenido"
                                            placeholder="Example http://example.com" (input)="onTextInputContenido($event)"
                                            class="w-full p-2 border rounded ">
                                        <div *ngIf="formSubmitted && contenidoLeccionForm.get('fuente_contenido')?.invalid"
                                            class="error text-red-700">
                                            Este campo es obligatorio.
                                        </div>
                                    </div>
                                    <!--imagen-->
                                    <div class="mb-4" *ngSwitchCase="'2'">
                                        <label
                                            class="text-sm font-normal relative cursor-pointer flex flex-row items-center  flex-none justify-center"
                                            for="nombre">
                                            <input type="file" id="fuente_contenido" class="hidden" accept="image/*" #fileInputs
                                                (change)="onFileSelectedsContenido($event, 'fuente_contenido')">
                                            <span (click)="triggerFileInputContenido()"
                                                class="text-black px-4 py-2 border-2 border-blue-300 rounded-lg inline-flex items-center bg-white justify-center hover:bg-blue-100 ml-3">
                                                Subir Imagen
                                                <fa-icon [icon]="faImages" class="text-md ml-2"></fa-icon>
                                            </span>
                                        </label>
                                        <div *ngIf="formSubmitted && contenidoLeccionForm.get('fuente_contenido')?.invalid"
                                            class="error text-red-700">
                                            Este campo es obligatorio.
                                        </div>
                                        <div *ngIf="contenidoLeccionForm.get('fuente_contenido')?.value"
                                            class="mt-2 text-gray-500 text-center">
                                            Archivo seleccionado: {{ selectedfuenteContenido.name }}
                                        </div>
                                    </div>
                                    <!--pdf-->
                                    <div class="mb-4" *ngSwitchCase="'3'">
                                        <label
                                            class="text-sm font-normal relative cursor-pointer flex flex-row items-center flex-none justify-center"
                                            for="nombre">
                                            <input type="file" id="fuente_contenido" class="hidden" accept="application/pdf"
                                                #fileInputs (change)="onFileSelectedsContenido($event, 'fuente_documentos')">
                                            <span (click)="triggerFileInputContenido()"
                                                class="text-black px-4 py-2 border-2 border-blue-300 rounded-lg inline-flex items-center bg-white justify-center hover:bg-blue-100 ml-3">
                                                Subir PDF
                                                <fa-icon [icon]="faImages" class="text-md ml-2"></fa-icon>
                                            </span>
                                        </label>
                                        <div *ngIf="formSubmitted && contenidoLeccionForm.get('fuente_contenido')?.invalid"
                                            class="error text-red-700">
                                            Este campo es obligatorio.
                                        </div>
                                        <div *ngIf="contenidoLeccionForm.get('fuente_contenido')?.value"
                                            class="mt-2 text-gray-500 text-center">
                                            Archivo seleccionado: {{ contenidoLeccionForm.get('fuente_contenido')?.value?.name }}
                                        </div>
                                    </div>
                                    <!--texto-->
                                    <div class="mb-4" *ngSwitchCase="'4'">
                                        <label class="text-xl font-normal flex-none justify-center"
                                            for="nombre"></label>
                                        <input type="text" id="fuente_contenido" formControlName="fuente_contenido"
                                            (input)="onTextInputContenido($event)" placeholder="Texto del contenido"
                                            class="w-full p-2 border rounded">
                                        <!-- <textarea type="text" id="fuente" formControlName="fuente" (input)="onTextInput($event)" placeholder="Texto de la actividad"
                                        class="w-full p-2 border rounded "></textarea> -->
                                        <div *ngIf="formSubmitted && contenidoLeccionForm.get('fuente_contenido')?.invalid"
                                            class="error text-red-700">
                                            Este campo es obligatorio.
                                        </div>
                                    </div>
                                </ng-container>
                            </div>

                            <input type="hidden" id="id_leccion" formControlName="id_leccion">
                            <!-- Bot√≥n para agregar -->
                            <div class="flex justify-end items-center mb-4">
                                <span class="mr-3 text-[#FFB000] text-[18px] italic mb-1"
                                    style="font-weight: 600;">Agregar Contenido</span>
                                <a (click)="addContenidoLeccionSuperAdmin()" [routerLink]="'#'"
                                    class="bg-[#FFB000] text-white w-16 h-8 rounded-lg flex items-center justify-center no-underline">
                                    <span class="text-3xl font-semibold leading-none ">+</span>
                                </a>
                            </div>
                        </form>
                        <!-- xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx -->
                    </div>
                </div>
            </div>
            <div class="mt-6 text-center">
                <button
                    class="bg-orange-500 text-white px-20 py-2 rounded-full text-lg font-semibold italic text-[30px] font-poppins">Finalizar</button>
            </div>

        </div>
    </div>
</div>