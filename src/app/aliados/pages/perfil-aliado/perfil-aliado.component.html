<form [formGroup]="aliadoForm">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <div class="container mx-auto py-6 md:py-12 ">
        <!-- Encabezado -->
        <header class="flex md:flex-row justify-between items-center mb-6 md:pl-4 mt-2">
            <app-header [title] [subtitle]="'Perfil'"></app-header>
        </header>

        <div
            class="w-full rounded-lg bg-[#FAFAFA] max-md:mt-20 max-[600px]:px-2 max-[600px]:py-2 min-[851px]:py-12 min-[851px]:px-16">

            <!-- Contenido -->
            <div class="min-[860px]:flex items-center w-full">

                <div class=" bg-[#e6e6e6] rounded-lg relative max-[860px]:w-full  min-[860px]:max-w-[45rem]">
                    <div class="w-full">
                        <div class="image-container">
                            <ng-container *ngIf="logoPreview || aliadoForm.get('logo')?.value; else noImage">
                                <img [src]="logoPreview || aliadoForm.get('logo')?.value" class="profile-image">
                            </ng-container>
                            <ng-template #noImage>
                                <span class="text-gray-500">Logo del Aliado</span>
                            </ng-template>
                            <button class="edit-button">
                                <i class="fas fa-pencil-alt">
                                    <input id="imagen_ruta" type="file" (change)="onFileSelecteds($event, 'logo')"
                                        accept="image/*" class="absolute inset-0 opacity-0 cursor-pointer">
                                </i>
                            </button>


                        </div>
                        <div class=" rounded-lg p-4 h-full w-full">
                            <div class="w-full">
                                <h5 class="text-xl font-bold mt-16 max-md:mt-20 text-center">Información Básica</h5>

                                <label for="nombre" class="block mt-4 mb-2">Nombre</label>
                                <input type="text" id="nombre" formControlName="nombre" [readonly]="blockedInputs"
                                    class="p-2 h-12 w-full  border rounded-md bg-white appearance-none focus:outline-none focus:ring-2 focus:ring-blue-200" />

                                <label for="password" class="block mb-2 mt-4">Contraseña</label>
                                <div class="relative mb-2">
                                    <input [type]="hide ? 'password' : 'text'" id="contrasena"
                                        formControlName="password" [readonly]="blockedInputs"
                                        class="p-2 h-12 w-full border rounded-md bg-white focus:outline-none focus:ring-2 focus:ring-blue-200 placeholder-black" />
                                    <!-- quité *ngIf="!blockedInputs" para que me dejara visualizar el campo de la contraseña -->
                                    <button type="button"
                                        class="absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5 text-gray-500"
                                        (click)="hide = !hide">
                                        <i *ngIf="hide" class="fa fa-eye-slash text-cyan-500"></i>
                                        <i *ngIf="!hide" class="fa fa-eye text-cyan-500"></i>
                                    </button>
                                </div>

                                <label for="correo" class="block mb-2 mt-4">Correo Electrónico</label>
                                <input type="text" id="correo" formControlName="email" [readonly]="bloqueado"
                                    class="p-2 h-12 w-full mb-2 border rounded-md bg-white appearance-none focus:outline-none focus:ring-2 focus:ring-blue-200" />

                                <div class="min-[860px]:flex md:h-2">
                                    <label for="tipodocumento" class="block mb-4 md:w-64"></label>
                                </div>

                                <!-- <h5 class="text-xl font-bold mb-4 text-center">Información Fanpage</h5> -->



                        <label for="apellido" class="block mb-2 mt-4">Descripcion fanpage</label>
                        <textarea type="text" id="apellido" formControlName="apellido" [readonly]="blockedInputs"
                            class="p-2 h-24 w-full border rounded-md bg-white appearance-none focus:outline-none focus:ring-2 focus:ring-blue-200"></textarea>



                            </div>
                        </div>
                    </div>


                </div>
                <div class="max-[860px]:hidden w-10"></div>
                <!-- Primera Columna -->

                <div class="min-[860px]:flex bg-[#e6e6e6] rounded-lg p-4 justify-between h-9 w-full">
                    <div class="w-full mt-0 pt-0">

                        




                        <h5 class="text-xl font-bold mt-6 mb-4 text-center">Banners</h5>
                        <div class="flex md:justify-end items-center mb-4 justify-center md:mr-5" *ngIf="idAliado">
                            <span class="mr-3 text-amber-500 text-[20px] italic mb-1" style="font-weight: 900;">Agregar Banner</span>
                            <button class="bg-amber-500 text-white w-16 h-8 rounded-lg flex items-center justify-center"  type="button"
                            (click)="openModal(null)">
                                <span class="text-3xl font-semibold leading-none ">+</span>
                            </button>
                        </div>
                  
                          <div class="" *ngIf="idAliado">
                            <div class="overflow-x-auto">
                              <table class="lg:w-5/6 md:5/6  md:mx-auto">
                                <thead>
                                  <tr>
                                    <th class="text-center p-2 flex-none">Imagen</th>
                                    <th class="text-center p-2 hidden sm:table-cell">Estado</th>
                                    <th class="text-center p-2">Acciones</th>
                                  </tr>
                                </thead>
                                <tbody class="space-y-6">
                                  <ng-container >
                                    <ng-container
                                      *ngFor="let banner of listBanners">
                                      <tr class="bg-line-gray my-5 rounded-xl">
                                        <td class="p-3 rounded-s-lg">
                                          <img [src]="banner.urlImagen" class="w-full">
                                        </td>
                                        <td class="px-3">{{ banner.estadobanner }}</td>
                                        <td class=" rounded-e-lg">
                                          <button type="button"
                                          class="inline-block py-0 px-1 text-xl text-blue-500 font-bold rounded-full hover:bg-gray-300 transition duration-300 mr-2"
                                          (click)="openModal(banner.id)">
                                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="h-6 w-6" fill="currentColor">
                                            <path d="M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1 0 32c0 8.8 7.2 16 16 16l32 0zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"/>
                                          </svg>
                                          </button>
                                        <button type="button" (click)="eliminarBanner(banner.id)"
                                        class="inline-block py-0 px-1 text-xl text-[#373435] font-bold rounded-full hover:bg-gray-300 transition duration-300">
                                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="h-6 w-6" fill="currentColor"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--><path d="M135.2 17.7C140.6 6.8 151.7 0 163.8 0L284.2 0c12.1 0 23.2 6.8 28.6 17.7L320 32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 96C14.3 96 0 81.7 0 64S14.3 32 32 32l96 0 7.2-14.3zM32 128l384 0 0 320c0 35.3-28.7 64-64 64L96 512c-35.3 0-64-28.7-64-64l0-320zm96 64c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16z"/></svg>
                                        </button>
                                      
                                        </td>
                                        
                                      </tr>
                                      <td class="py-2"></td>
                                      <!-- <tr *ngIf="i < listBanners.length - 1">
                                        <td class="py-2"></td>
                                      </tr> -->
                                    </ng-container>
                                  </ng-container>
                                  <tr *ngIf="listBanners.length === 0">
                                    <td colspan="4" class="text-center py-4 text-gray-500">No se encontraron Banners.</td>
                                  </tr>
                                </tbody>
                  
                              </table>
                            </div>
                          </div>

                    </div>
                    

                    <!-- <div class="w-full">

                    </div> -->

                </div>
                <!-- Segunda Columna -->

            </div>


        </div>
    </div>
    <div class="mb-4 w-full flex md:justify-around justify-center">

        <div class="flex ">
            <button class="bg-amber-500 text-white font-bold py-2 px-4 rounded-full mr-2 italic" (click)="onCancel()"
                *ngIf="!blockedInputs" (click)="toggleInputsLock()">
                Cancelar
            </button>
            <button type="submit" class="bg-amber-500 text-white font-bold py-2 px-4 rounded-full italic"
                *ngIf="!blockedInputs" (click)="updateEmprendedor()">
                Guardar cambios
            </button>
        </div>

        <div class="flex mt-0">
            <div class="flex justify-start">
                <button id="botonDesactivar"
                    class="bg-amber-500 text-white font-bold py-2 px-4 md:-mt-4 rounded-full -pl-12 mr-3 italic"
                    *ngIf="blockedInputs" (click)="desactivarEmprendedor()">Desactivar Cuenta
                </button>
            </div>
            <button id="boton" class="bg-amber-500 text-white font-bold py-2 px-4 md:-mt-4 rounded-full -pl-12 italic"
                *ngIf="blockedInputs" (click)="toggleInputsLock()"> Editar Perfil
            </button>
        </div>
    </div>
    <!-- Estilo de los botones -->

</form>